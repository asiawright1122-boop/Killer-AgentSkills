---
import Layout from '../../../layouts/Layout.astro';
import { SUPPORTED_LOCALES, loadMessages, useTranslations, type Locale } from '../../../i18n';

export const prerender = false;

// Validate locale
const { locale } = Astro.params;
if (!locale || !SUPPORTED_LOCALES.includes(locale as Locale)) {
  return new Response(null, { status: 404, statusText: 'Not Found' });
}

const typedLocale = locale as Locale;

// Load translations
const messages = await loadMessages(typedLocale);
const t = useTranslations(messages);

const pageTitle = t('Integrations.worksWhereYouWork');
const pageDescription = t('Integrations.heroDesc');

const integrations = [
  {
    name: 'Cursor',
    desc: t('Integrations.cards.cursor.desc'),
    icon: 'üñ±Ô∏è',
    link: 'https://cursor.sh',
  },
  {
    name: 'Windsurf',
    desc: t('Integrations.cards.windsurf.desc'),
    icon: 'üèÑ',
    link: 'https://codeium.com/windsurf',
  },
  {
    name: 'Claude Code',
    desc: t('Integrations.cards.claude.desc'),
    icon: 'üß†',
    link: 'https://claude.ai',
  },
  {
    name: 'Goose',
    desc: t('Integrations.cards.goose.desc'),
    icon: 'ü™ø',
    link: 'https://github.com/block/goose',
  },
];
---

<Layout locale={locale} title={pageTitle} description={pageDescription}>
  {/* BreadcrumbList JSON-LD */}
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": t('Common.home'), "item": `https://killer-skills.com/${locale}` },
      { "@type": "ListItem", "position": 2, "name": pageTitle, "item": `https://killer-skills.com/${locale}/integrations` }
    ]
  })} />
  <div class="bg-slate-50/50 dark:bg-slate-950/50 min-h-screen">

    <!-- Hero Section -->
    <div class="bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 pt-12 pb-8 md:pt-16 md:pb-12">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-4 tracking-tight">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-blue-600">
            {t('Integrations.worksWhereYouWork')}
          </span>
        </h1>
        <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl">
          {t('Integrations.heroDesc')}
        </p>
      </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

      <!-- Integrations Grid -->
      <section class="mb-16">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          {integrations.map(item => (
            <a
              href={item.link}
              target="_blank"
              rel="noopener noreferrer"
              class="group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-700 transition-all duration-200"
            >
              <div class="flex items-center gap-4 mb-3">
                <div class="text-3xl">{item.icon}</div>
                <h2 class="text-lg font-semibold text-slate-900 dark:text-white group-hover:text-cyan-600 dark:group-hover:text-cyan-400 transition-colors">
                  {item.name}
                </h2>
              </div>
              <p class="text-sm text-slate-500 dark:text-slate-400 mb-3">{item.desc}</p>
              <span class="text-sm text-cyan-600 dark:text-cyan-400 font-medium">
                {t('Integrations.viewGuide')} ‚Üí
              </span>
            </a>
          ))}
        </div>
      </section>

      <!-- Protocol Section -->
      <section class="bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-8 text-center">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-3">
          {t('Integrations.missingTool')}
        </h2>
        <p class="text-slate-600 dark:text-slate-400 mb-6 max-w-lg mx-auto">
          {t('Integrations.missingToolDesc')}
        </p>
        <a
          href={`/${locale}/docs`}
          class="inline-flex items-center px-6 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white font-medium rounded-xl transition-colors text-sm shadow-lg shadow-cyan-500/20"
        >
          {t('Integrations.learnProtocol')} ‚Üí
        </a>
      </section>
    </div>
  </div>
</Layout>
