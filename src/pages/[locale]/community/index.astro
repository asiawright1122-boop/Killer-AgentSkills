---
import Layout from '../../../layouts/Layout.astro';
import { SUPPORTED_LOCALES, loadMessages, useTranslations, type Locale } from '../../../i18n';

export const prerender = false;

// Validate locale
const { locale } = Astro.params;
if (!locale || !SUPPORTED_LOCALES.includes(locale as Locale)) {
  return new Response(null, { status: 404, statusText: 'Not Found' });
}

const typedLocale = locale as Locale;

// Load translations
const messages = await loadMessages(typedLocale);
const t = useTranslations(messages);

const pageTitle = t('Community.title');
const pageDescription = t('Community.heroDesc');

const communityCards = [
  {
    title: t('Community.cards.source.title'),
    desc: t('Community.cards.source.desc'),
    icon: 'üì¶',
    link: 'https://github.com/anthropics/skills',
    label: 'GitHub',
  },
  {
    title: t('Community.cards.chat.title'),
    desc: t('Community.cards.chat.desc'),
    icon: 'üí¨',
    link: 'https://discord.gg/killer-skills',
    label: 'Discord',
  },
  {
    title: t('Community.cards.news.title'),
    desc: t('Community.cards.news.desc'),
    icon: 'üê¶',
    link: 'https://twitter.com/killerskills',
    label: 'Twitter',
  },
];
---

<Layout locale={locale} title={pageTitle} description={pageDescription}>
  {/* BreadcrumbList JSON-LD */}
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": t('Common.home'), "item": `https://killer-skills.com/${locale}` },
      { "@type": "ListItem", "position": 2, "name": pageTitle, "item": `https://killer-skills.com/${locale}/community` }
    ]
  })} />
  <div class="bg-slate-50/50 dark:bg-slate-950/50 min-h-screen">

    <!-- Hero Section -->
    <div class="bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 pt-12 pb-8 md:pt-16 md:pb-12">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-4 tracking-tight">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-blue-600">
            {t('Community.join')}
          </span>
        </h1>
        <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl">
          {t('Community.heroDesc')}
        </p>
      </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

      <!-- Community Cards -->
      <section class="mb-16">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {communityCards.map(card => (
            <a
              href={card.link}
              target="_blank"
              rel="noopener noreferrer"
              class="group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-700 transition-all duration-200"
            >
              <div class="text-3xl mb-3">{card.icon}</div>
              <h2 class="text-lg font-semibold text-slate-900 dark:text-white mb-1 group-hover:text-cyan-600 dark:group-hover:text-cyan-400 transition-colors">
                {card.title}
              </h2>
              <p class="text-sm text-slate-500 dark:text-slate-400 mb-3">{card.desc}</p>
              <span class="text-sm text-cyan-600 dark:text-cyan-400 font-medium">
                {card.label} ‚Üí
              </span>
            </a>
          ))}
        </div>
      </section>

      <!-- Contribute Section -->
      <section class="mb-12 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-3">
          {t('Community.contribute')}
        </h2>
        <p class="text-slate-600 dark:text-slate-400 mb-4">
          {t('Community.contributeDesc')}
        </p>
        <a
          href="https://github.com/anthropics/skills/blob/main/CONTRIBUTING.md"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-medium transition-colors"
        >
          {t('Community.readGuide')}
        </a>
      </section>

      <!-- Feedback Section -->
      <section class="bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-3">
          {t('Community.shareFeedback')}
        </h2>
        <p class="text-slate-600 dark:text-slate-400 mb-4">
          {t('Community.feedbackDesc')}
        </p>
        <a
          href="https://github.com/anthropics/skills/issues"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 font-medium transition-colors"
        >
          {t('Community.submitIssue')}
        </a>
      </section>
    </div>
  </div>
</Layout>
